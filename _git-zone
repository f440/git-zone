#compdef git

# zsh completion for git-zone (git subcommand)

_git_zone() {
    # Get all local branches, remote branches (cleaned), and tags
    local -a all_refs
    all_refs=(${(f)"$(git for-each-ref --format='%(refname:short)' refs)"})

    _arguments -C \
        '(-h --help)'{-h,--help}'[Show help message and exit.]' \
        '1:Branch, PR number, or PR URL:_values "refs" $all_refs' \
        '2:Source reference (optional):_values "source-ref" $all_refs'
}
